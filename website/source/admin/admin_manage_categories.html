<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Catégories - Admin - Maison Trüvra</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Maison Trüvra Global Admin Styles (now in admin_style.css) -->
    <link rel="stylesheet" href="js/css/admin_style.css"> 
</head>
<body class="admin-body">
    <div class="admin-main-container">
        <header class="admin-page-header d-flex justify-content-between align-items-center">
            <h1 class="admin-page-title mb-0">Gestion des Catégories</h1>
            <button type="button" class="btn btn-primary" id="add-new-category-btn">Ajouter une Catégorie</button>
        </header>

        <main>
            <section class="admin-content-area">
                <!-- Add Category Form (could be in a modal or a separate section) -->
                <div id="add-category-form-section" class="content-card mb-4" style="display: none;"> <!-- Initially hidden, JS will manage visibility -->
                    <h2 class="section-heading">Ajouter/Modifier une Catégorie</h2> <!-- Title can be changed by JS -->
                    <form id="category-form">
                        <input type="hidden" id="category-id" name="category_id">
                        <div class="form-group">
                            <label for="category-name">Nom de la Catégorie</label>
                            <input type="text" id="category-name" name="name" required placeholder="Ex: Truffes Fraîches">
                        </div>
                        <div class="form-group">
                            <label for="category-description">Description (Optionnel)</label>
                            <textarea id="category-description" name="description" rows="3" placeholder="Courte description de la catégorie"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="category-parent">Catégorie Parente (Optionnel)</label>
                            <select id="category-parent" name="parent_id">
                                <option value="">Aucune (Catégorie Principale)</option>
                                <!-- JS (admin_categories.js) to populate with existing categories -->
                            </select>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Enregistrer Catégorie</button>
                            <button type="button" class="btn btn-secondary" id="cancel-category-form-btn">Annuler</button>
                        </div>
                    </form>
                </div>

                <table class="admin-table" id="categories-table">
                    <thead>
                        <tr>
                            <th>Nom de la Catégorie</th>
                            <th>Description</th>
                            <th>Produits Associés</th>
                            <th class="text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Example Row (JS would populate this) -->
                        <!-- Rows will be dynamically inserted by js/admin_categories.js -->
                        <tr>
                            <td colspan="4" class="text-center p-4">Chargement des catégories...</td>
                        </tr>
                    </tbody>
                </table>
            </section>
        </main>

        <footer class="text-center text-small mt-4 py-4 border-t border-mt-warm-taupe">
            <p>&copy; <span id="current-year"></span> Maison Trüvra. Tous droits réservés.</p>
        </footer>
    </div>

    <!-- Admin specific JS for category management -->
    <!-- Ensure admin_api.js (or similar for fetchAPIData) is loaded before admin_categories.js if it's a dependency -->
    <script src="js/admin_api.js"></script> 
    <script src="js/admin_categories.js"></script>
    <script>
        // Set current year in footer
        document.getElementById('current-year').textContent = new Date().getFullYear();
        
        // The main logic for showing/hiding the form, fetching data, 
        // and handling form submissions is now in js/admin_categories.js
        // This inline script is kept minimal.
    </script>
</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Manage Categories</title>
    <link rel="stylesheet" href="js/css/admin_style.css">
     <style>
        main { padding: 20px; max-width: 900px; margin: auto; }
        h2, h3 { color: #333; }
        #categoryFormContainer, #categoriesTableContainer { margin-bottom: 30px; padding: 15px; background-color: #f9f9f9; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        form div { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], input[type="url"], textarea {
            width: calc(100% - 22px); padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;
        }
        input[type="checkbox"] { margin-right: 5px; vertical-align: middle; }
        textarea { min-height: 80px; }
        button { padding: 10px 15px; background-color: #007bff; color: white; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion des Catégories - Admin - Maison Trüvra</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@400;500;700&display=swap" rel="stylesheet">
    
    <!-- Maison Trüvra Global Admin Styles (now in admin_style.css) -->
    <link rel="stylesheet" href="js/css/admin_style.css"> 
</head>
<body class="admin-body">
    <div class="admin-main-container">
        <header class="admin-page-header d-flex justify-content-between align-items-center">
            <h1 class="admin-page-title mb-0">Gestion des Catégories</h1>
            <button type="button" class="btn btn-primary" id="add-new-category-btn">Ajouter une Catégorie</button>
        </header>

        <main>
            <section class="admin-content-area">
                <!-- Add Category Form (could be in a modal or a separate section) -->
                <div id="add-category-form-section" class="content-card mb-4" style="display: none;"> <!-- Initially hidden -->
                    <h2 class="section-heading">Ajouter/Modifier une Catégorie</h2>
                    <form id="category-form">
                        <input type="hidden" id="category-id" name="category_id">
                        <div class="form-group">
                            <label for="category-name">Nom de la Catégorie</label>
                            <input type="text" id="category-name" name="name" required placeholder="Ex: Truffes Fraîches">
                        </div>
                        <div class="form-group">
                            <label for="category-description">Description (Optionnel)</label>
                            <textarea id="category-description" name="description" rows="3" placeholder="Courte description de la catégorie"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="category-parent">Catégorie Parente (Optionnel)</label>
                            <select id="category-parent" name="parent_id">
                                <option value="">Aucune (Catégorie Principale)</option>
                                <!-- JS to populate with existing categories -->
                            </select>
                        </div>
                        <div class="button-group">
                            <button type="submit" class="btn btn-primary">Enregistrer Catégorie</button>
                            <button type="button" class="btn btn-secondary" id="cancel-category-form-btn">Annuler</button>
                        </div>
                    </form>
                </div>

                <table class="admin-table" id="categories-table">
                    <thead>
                        <tr>
                            <th>Nom de la Catégorie</th>
                            <th>Description</th>
                            <th>Produits Associés</th>
                            <th class="text-right">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Example Row (JS would populate this) -->
                        <tr>
                            <td class="font-weight-medium">Truffes Fraîches</td>
                            <td>Sélection de truffes noires et blanches de saison.</td>
                            <td>12</td>
                            <td class="actions text-right">
                                <a href="#" class="edit-category">Modifier</a>
                                <button type="button" class="btn-link danger delete-category">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-weight-medium">Huiles & Condiments</td>
                            <td>Huiles d'olive infusées à la truffe, vinaigres balsamiques.</td>
                            <td>8</td>
                            <td class="actions text-right">
                                <a href="#" class="edit-category">Modifier</a>
                                <button type="button" class="btn-link danger delete-category">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td class="font-weight-medium">&nbsp;&nbsp;&nbsp;↳ Truffes Noires (Sous-catégorie)</td>
                            <td>Tuber Melanosporum</td>
                            <td>5</td>
                            <td class="actions text-right">
                                <a href="#" class="edit-category">Modifier</a>
                                <button type="button" class="btn-link danger delete-category">Supprimer</button>
                            </td>
                        </tr>
                        <!-- More rows here -->
                    </tbody>
                </table>
            </section>
        </main>

        <footer class="text-center text-small mt-4 py-4 border-t border-mt-warm-taupe">
            <p>&copy; <span id="current-year"></span> Maison Trüvra. Tous droits réservés.</p>
        </footer>
    </div>

    <!-- Admin specific JS for category management -->
    <script src="js/admin_categories.js"></script>
    <script>
        document.getElementById('current-year').textContent = new Date().getFullYear();
        const addCategoryBtn = document.getElementById('add-new-category-btn');
        const categoryFormSection = document.getElementById('add-category-form-section');
        const cancelCategoryFormBtn = document.getElementById('cancel-category-form-btn');

        addCategoryBtn.addEventListener('click', () => {
            categoryFormSection.style.display = 'block';
            document.getElementById('category-form').reset(); // Reset form for new entry
            document.getElementById('category-id').value = ''; // Clear any existing ID
        });
        if(cancelCategoryFormBtn) {
            cancelCategoryFormBtn.addEventListener('click', () => {
                categoryFormSection.style.display = 'none';
            });
        }
        // Further JS in admin_categories.js to handle form submission, populating table, edit, delete etc.
    </script>
</body>
</html>
